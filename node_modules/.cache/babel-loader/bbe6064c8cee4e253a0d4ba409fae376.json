{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateURI = exports.loadScript = exports.isEqualArray = exports.getSpotifyURIType = exports.TYPE = exports.STATUS = exports.canUseDOM = void 0;\n\nvar exenv_1 = require(\"exenv\");\n\nexports.canUseDOM = function () {\n  return exenv_1.canUseDOM;\n};\n\nexports.STATUS = {\n  ERROR: 'ERROR',\n  IDLE: 'IDLE',\n  INITIALIZING: 'INITIALIZING',\n  READY: 'READY',\n  RUNNING: 'RUNNING',\n  UNSUPPORTED: 'UNSUPPORTED'\n};\nexports.TYPE = {\n  DEVICE: 'device_update',\n  PLAYER: 'player_update',\n  STATUS: 'status_update',\n  TRACK: 'track_update'\n};\n\nfunction getSpotifyURIType(uri) {\n  var _a = __read(uri.split(':'), 2),\n      _b = _a[1],\n      type = _b === void 0 ? '' : _b;\n\n  return type;\n}\n\nexports.getSpotifyURIType = getSpotifyURIType;\n\nfunction isEqualArray(A, B) {\n  if (!Array.isArray(A) || !Array.isArray(B) || A.length !== B.length) {\n    return false;\n  }\n\n  var result = true;\n  A.forEach(function (a) {\n    return B.forEach(function (b) {\n      result = a === b;\n    });\n  });\n  return result;\n}\n\nexports.isEqualArray = isEqualArray;\n\nfunction loadScript(attributes) {\n  if (!attributes || !attributes.source) {\n    throw new Error('Invalid attributes');\n  }\n\n  return new Promise(function (resolve, reject) {\n    var _a = __assign({\n      async: false,\n      defer: false\n    }, attributes),\n        async = _a.async,\n        defer = _a.defer,\n        id = _a.id,\n        source = _a.source;\n\n    var scriptTag = document.getElementById('spotify-player');\n\n    if (!scriptTag) {\n      var script = document.createElement('script');\n      script.id = id || '';\n      script.type = 'text/javascript';\n      script.async = async;\n      script.defer = defer;\n      script.src = source;\n\n      script.onload = function () {\n        return resolve(undefined);\n      };\n\n      script.onerror = function (error) {\n        return reject(new Error(\"createScript: \" + error.message));\n      };\n\n      document.head.appendChild(script);\n    } else {\n      resolve();\n    }\n  });\n}\n\nexports.loadScript = loadScript;\n\nfunction validateURI(input) {\n  var validTypes = ['album', 'artist', 'playlist', 'show', 'track'];\n  /* istanbul ignore else */\n\n  if (input && input.indexOf(':') > -1) {\n    var _a = __read(input.split(':'), 3),\n        key = _a[0],\n        type = _a[1],\n        id = _a[2];\n    /* istanbul ignore else */\n\n\n    if (key === 'spotify' && validTypes.indexOf(type) >= 0 && id.length === 22) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexports.validateURI = validateURI;","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateURI = exports.loadScript = exports.isEqualArray = exports.getSpotifyURIType = exports.TYPE = exports.STATUS = exports.canUseDOM = void 0;\nvar exenv_1 = require(\"exenv\");\nexports.canUseDOM = function () { return exenv_1.canUseDOM; };\nexports.STATUS = {\n    ERROR: 'ERROR',\n    IDLE: 'IDLE',\n    INITIALIZING: 'INITIALIZING',\n    READY: 'READY',\n    RUNNING: 'RUNNING',\n    UNSUPPORTED: 'UNSUPPORTED',\n};\nexports.TYPE = {\n    DEVICE: 'device_update',\n    PLAYER: 'player_update',\n    STATUS: 'status_update',\n    TRACK: 'track_update',\n};\nfunction getSpotifyURIType(uri) {\n    var _a = __read(uri.split(':'), 2), _b = _a[1], type = _b === void 0 ? '' : _b;\n    return type;\n}\nexports.getSpotifyURIType = getSpotifyURIType;\nfunction isEqualArray(A, B) {\n    if (!Array.isArray(A) || !Array.isArray(B) || A.length !== B.length) {\n        return false;\n    }\n    var result = true;\n    A.forEach(function (a) {\n        return B.forEach(function (b) {\n            result = a === b;\n        });\n    });\n    return result;\n}\nexports.isEqualArray = isEqualArray;\nfunction loadScript(attributes) {\n    if (!attributes || !attributes.source) {\n        throw new Error('Invalid attributes');\n    }\n    return new Promise(function (resolve, reject) {\n        var _a = __assign({ async: false, defer: false }, attributes), async = _a.async, defer = _a.defer, id = _a.id, source = _a.source;\n        var scriptTag = document.getElementById('spotify-player');\n        if (!scriptTag) {\n            var script = document.createElement('script');\n            script.id = id || '';\n            script.type = 'text/javascript';\n            script.async = async;\n            script.defer = defer;\n            script.src = source;\n            script.onload = function () { return resolve(undefined); };\n            script.onerror = function (error) { return reject(new Error(\"createScript: \" + error.message)); };\n            document.head.appendChild(script);\n        }\n        else {\n            resolve();\n        }\n    });\n}\nexports.loadScript = loadScript;\nfunction validateURI(input) {\n    var validTypes = ['album', 'artist', 'playlist', 'show', 'track'];\n    /* istanbul ignore else */\n    if (input && input.indexOf(':') > -1) {\n        var _a = __read(input.split(':'), 3), key = _a[0], type = _a[1], id = _a[2];\n        /* istanbul ignore else */\n        if (key === 'spotify' && validTypes.indexOf(type) >= 0 && id.length === 22) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.validateURI = validateURI;\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}