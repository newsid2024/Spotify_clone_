{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TYPE = exports.STATUS = void 0;\nvar React = require(\"react\");\nvar memoize_one_1 = require(\"memoize-one\");\nvar spotify_1 = require(\"./spotify\");\nvar styles_1 = require(\"./styles\");\nvar utils_1 = require(\"./utils\");\nObject.defineProperty(exports, \"STATUS\", {\n  enumerable: true,\n  get: function () {\n    return utils_1.STATUS;\n  }\n});\nObject.defineProperty(exports, \"TYPE\", {\n  enumerable: true,\n  get: function () {\n    return utils_1.TYPE;\n  }\n});\nvar Actions_1 = require(\"./components/Actions\");\nvar Content_1 = require(\"./components/Content\");\nvar Controls_1 = require(\"./components/Controls\");\nvar ErrorMessage_1 = require(\"./components/ErrorMessage\");\nvar Info_1 = require(\"./components/Info\");\nvar Loader_1 = require(\"./components/Loader\");\nvar Player_1 = require(\"./components/Player\");\nvar Slider_1 = require(\"./components/Slider\");\nvar SpotifyWebPlayer = /** @class */function (_super) {\n  __extends(SpotifyWebPlayer, _super);\n  function SpotifyWebPlayer(props) {\n    var _this = _super.call(this, props) || this;\n    _this.isActive = false;\n    _this.emptyTrack = {\n      artists: '',\n      durationMs: 0,\n      id: '',\n      image: '',\n      name: '',\n      uri: ''\n    };\n    _this.getPlayOptions = memoize_one_1.default(function (data) {\n      var playOptions = {\n        context_uri: undefined,\n        uris: undefined\n      };\n      /* istanbul ignore else */\n      if (data) {\n        var ids = Array.isArray(data) ? data : [data];\n        if (!ids.every(function (d) {\n          return utils_1.validateURI(d);\n        })) {\n          // eslint-disable-next-line no-console\n          console.error('Invalid URI');\n          return playOptions;\n        }\n        if (ids.some(function (d) {\n          return utils_1.getSpotifyURIType(d) === 'track';\n        })) {\n          if (!ids.every(function (d) {\n            return utils_1.getSpotifyURIType(d) === 'track';\n          })) {\n            // eslint-disable-next-line no-console\n            console.warn(\"You can't mix tracks URIs with other types\");\n          }\n          playOptions.uris = ids.filter(function (d) {\n            return utils_1.validateURI(d) && utils_1.getSpotifyURIType(d) === 'track';\n          });\n        } else {\n          if (ids.length > 1) {\n            // eslint-disable-next-line no-console\n            console.warn(\"Albums, Artists, Playlists and Podcasts can't have multiple URIs\");\n          }\n          // eslint-disable-next-line prefer-destructuring\n          playOptions.context_uri = ids[0];\n        }\n      }\n      return playOptions;\n    });\n    _this.hasNewToken = false;\n    _this.seekUpdateInterval = 100;\n    _this.handleChangeRange = function (position) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var track, token, percentage, state, error_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              track = this.state.track;\n              token = this.props.token;\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 8,, 9]);\n              percentage = position / 100;\n              if (!this.isExternalPlayer) return [3 /*break*/, 3];\n              return [4 /*yield*/, spotify_1.seek(token, Math.round(track.durationMs * percentage))];\n            case 2:\n              _a.sent();\n              this.updateState({\n                position: position,\n                progressMs: Math.round(track.durationMs * percentage)\n              });\n              return [3 /*break*/, 7];\n            case 3:\n              if (!this.player) return [3 /*break*/, 7];\n              return [4 /*yield*/, this.player.getCurrentState()];\n            case 4:\n              state = _a.sent();\n              if (!state) return [3 /*break*/, 6];\n              return [4 /*yield*/, this.player.seek(Math.round(state.track_window.current_track.duration_ms * percentage))];\n            case 5:\n              _a.sent();\n              return [3 /*break*/, 7];\n            case 6:\n              this.updateState({\n                position: 0\n              });\n              _a.label = 7;\n            case 7:\n              return [3 /*break*/, 9];\n            case 8:\n              error_1 = _a.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_1);\n              return [3 /*break*/, 9];\n            case 9:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleClickTogglePlay = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var isActive, error_2;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              isActive = this.state.isActive;\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n              return [4 /*yield*/, this.togglePlay(!this.isExternalPlayer && !isActive)];\n            case 2:\n              _a.sent();\n              return [3 /*break*/, 4];\n            case 3:\n              error_2 = _a.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_2);\n              return [3 /*break*/, 4];\n            case 4:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleClickPrevious = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var token, error_3;\n        var _this = this;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              _a.trys.push([0, 5,, 6]);\n              if (!this.isExternalPlayer) return [3 /*break*/, 2];\n              token = this.props.token;\n              return [4 /*yield*/, spotify_1.previous(token)];\n            case 1:\n              _a.sent();\n              this.syncTimeout = window.setTimeout(function () {\n                _this.syncDevice();\n              }, 300);\n              return [3 /*break*/, 4];\n            case 2:\n              if (!this.player) return [3 /*break*/, 4];\n              return [4 /*yield*/, this.player.previousTrack()];\n            case 3:\n              _a.sent();\n              _a.label = 4;\n            case 4:\n              return [3 /*break*/, 6];\n            case 5:\n              error_3 = _a.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_3);\n              return [3 /*break*/, 6];\n            case 6:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleClickNext = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var token, error_4;\n        var _this = this;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              _a.trys.push([0, 5,, 6]);\n              if (!this.isExternalPlayer) return [3 /*break*/, 2];\n              token = this.props.token;\n              return [4 /*yield*/, spotify_1.next(token)];\n            case 1:\n              _a.sent();\n              this.syncTimeout = window.setTimeout(function () {\n                _this.syncDevice();\n              }, 300);\n              return [3 /*break*/, 4];\n            case 2:\n              if (!this.player) return [3 /*break*/, 4];\n              return [4 /*yield*/, this.player.nextTrack()];\n            case 3:\n              _a.sent();\n              _a.label = 4;\n            case 4:\n              return [3 /*break*/, 6];\n            case 5:\n              error_4 = _a.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_4);\n              return [3 /*break*/, 6];\n            case 6:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleClickDevice = function (deviceId) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var isUnsupported, _a, autoPlay, persistDeviceSelection, token, player, error_5;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              isUnsupported = this.state.isUnsupported;\n              _a = this.props, autoPlay = _a.autoPlay, persistDeviceSelection = _a.persistDeviceSelection, token = _a.token;\n              this.updateState({\n                currentDeviceId: deviceId\n              });\n              _b.label = 1;\n            case 1:\n              _b.trys.push([1, 7,, 8]);\n              return [4 /*yield*/, spotify_1.setDevice(token, deviceId)];\n            case 2:\n              _b.sent();\n              if (persistDeviceSelection) {\n                sessionStorage.setItem('rswpDeviceId', deviceId);\n              }\n              if (!isUnsupported) return [3 /*break*/, 6];\n              return [4 /*yield*/, this.syncDevice()];\n            case 3:\n              _b.sent();\n              return [4 /*yield*/, spotify_1.getPlaybackState(token)];\n            case 4:\n              player = _b.sent();\n              if (!(player && !player.is_playing && autoPlay)) return [3 /*break*/, 6];\n              return [4 /*yield*/, this.togglePlay(true)];\n            case 5:\n              _b.sent();\n              _b.label = 6;\n            case 6:\n              return [3 /*break*/, 8];\n            case 7:\n              error_5 = _b.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_5);\n              return [3 /*break*/, 8];\n            case 8:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleFavoriteStatusChange = function (isSaved) {\n      var callback = _this.props.callback;\n      _this.updateState({\n        isSaved: isSaved\n      });\n      callback(__assign(__assign({}, __assign(__assign({}, _this.state), {\n        isSaved: isSaved\n      })), {\n        type: utils_1.TYPE.TRACK\n      }));\n    };\n    _this.handlePlayerErrors = function (type, message) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var status, isPlaybackError, isInitializationError, nextStatus, devices, token;\n        var _a;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              status = this.state.status;\n              isPlaybackError = type === 'playback_error';\n              isInitializationError = type === 'initialization_error';\n              nextStatus = status;\n              devices = [];\n              if (!(this.player && !isPlaybackError)) return [3 /*break*/, 2];\n              return [4 /*yield*/, this.player.disconnect()];\n            case 1:\n              _b.sent();\n              _b.label = 2;\n            case 2:\n              if (!isInitializationError) return [3 /*break*/, 4];\n              nextStatus = utils_1.STATUS.UNSUPPORTED;\n              token = this.props.token;\n              return [4 /*yield*/, spotify_1.getDevices(token)];\n            case 3:\n              _a = _b.sent().devices, devices = _a === void 0 ? [] : _a;\n              _b.label = 4;\n            case 4:\n              if (!isInitializationError && !isPlaybackError) {\n                nextStatus = utils_1.STATUS.ERROR;\n              }\n              this.updateState({\n                devices: devices,\n                error: message,\n                errorType: type,\n                isInitializing: false,\n                isUnsupported: isInitializationError,\n                status: nextStatus\n              });\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handlePlayerStateChanges = function (state) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var isPlaying, _a, album, artists, duration_ms, id, name_1, uri, volume, track, error_6;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              _b.trys.push([0, 6,, 7]);\n              if (!state) return [3 /*break*/, 2];\n              isPlaying = !state.paused;\n              _a = state.track_window.current_track, album = _a.album, artists = _a.artists, duration_ms = _a.duration_ms, id = _a.id, name_1 = _a.name, uri = _a.uri;\n              return [4 /*yield*/, this.player.getVolume()];\n            case 1:\n              volume = _b.sent();\n              track = {\n                artists: artists.map(function (d) {\n                  return d.name;\n                }).join(', '),\n                durationMs: duration_ms,\n                id: id,\n                image: this.setAlbumImage(album),\n                name: name_1,\n                uri: uri\n              };\n              this.updateState({\n                error: '',\n                errorType: '',\n                isActive: true,\n                isPlaying: isPlaying,\n                nextTracks: state.track_window.next_tracks,\n                previousTracks: state.track_window.previous_tracks,\n                track: track,\n                volume: volume\n              });\n              return [3 /*break*/, 5];\n            case 2:\n              if (!this.isExternalPlayer) return [3 /*break*/, 4];\n              return [4 /*yield*/, this.syncDevice()];\n            case 3:\n              _b.sent();\n              return [3 /*break*/, 5];\n            case 4:\n              this.updateState({\n                isActive: false,\n                isPlaying: false,\n                nextTracks: [],\n                position: 0,\n                previousTracks: [],\n                track: {\n                  artists: '',\n                  durationMs: 0,\n                  id: '',\n                  image: '',\n                  name: '',\n                  uri: ''\n                }\n              });\n              _b.label = 5;\n            case 5:\n              return [3 /*break*/, 7];\n            case 6:\n              error_6 = _b.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_6);\n              return [3 /*break*/, 7];\n            case 7:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handlePlayerStatus = function (_a) {\n      var device_id = _a.device_id;\n      return __awaiter(_this, void 0, void 0, function () {\n        var _b, currentDeviceId, devices;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              return [4 /*yield*/, this.initializeDevices(device_id)];\n            case 1:\n              _b = _c.sent(), currentDeviceId = _b.currentDeviceId, devices = _b.devices;\n              this.updateState({\n                currentDeviceId: currentDeviceId,\n                deviceId: device_id,\n                devices: devices,\n                isInitializing: false,\n                status: device_id ? utils_1.STATUS.READY : utils_1.STATUS.IDLE\n              });\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.handleToggleMagnify = function () {\n      var magnifySliderOnHover = _this.props.magnifySliderOnHover;\n      if (magnifySliderOnHover) {\n        _this.updateState(function (prevState) {\n          return {\n            isMagnified: !prevState.isMagnified\n          };\n        });\n      }\n    };\n    _this.initializePlayer = function () {\n      var _a = _this.props,\n        name = _a.name,\n        token = _a.token;\n      _this.updateState({\n        isInitializing: true\n      });\n      // @ts-ignore\n      _this.player = new window.Spotify.Player({\n        getOAuthToken: function (cb) {\n          cb(token);\n        },\n        name: name\n      });\n      _this.player.addListener('ready', _this.handlePlayerStatus);\n      _this.player.addListener('not_ready', _this.handlePlayerStatus);\n      _this.player.addListener('player_state_changed', _this.handlePlayerStateChanges);\n      _this.player.addListener('initialization_error', function (error) {\n        return _this.handlePlayerErrors('initialization_error', error.message);\n      });\n      _this.player.addListener('authentication_error', function (error) {\n        return _this.handlePlayerErrors('authentication_error', error.message);\n      });\n      _this.player.addListener('account_error', function (error) {\n        return _this.handlePlayerErrors('account_error', error.message);\n      });\n      _this.player.addListener('playback_error', function (error) {\n        return _this.handlePlayerErrors('playback_error', error.message);\n      });\n      _this.player.connect();\n    };\n    _this.setAlbumImage = function (album) {\n      var width = Math.min.apply(Math, __spread(album.images.map(function (d) {\n        return d.width;\n      })));\n      var thumb = album.images.find(function (d) {\n        return d.width === width;\n      }) || {};\n      return thumb.url;\n    };\n    _this.setExternalDevice = function (id) {\n      _this.updateState({\n        currentDeviceId: id,\n        isPlaying: true\n      });\n    };\n    _this.setVolume = function (volume) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var token;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              token = this.props.token;\n              if (!this.isExternalPlayer) return [3 /*break*/, 3];\n              return [4 /*yield*/, spotify_1.setVolume(token, Math.round(volume * 100))];\n            case 1:\n              _a.sent();\n              return [4 /*yield*/, this.syncDevice()];\n            case 2:\n              _a.sent();\n              return [3 /*break*/, 5];\n            case 3:\n              if (!this.player) return [3 /*break*/, 5];\n              return [4 /*yield*/, this.player.setVolume(volume)];\n            case 4:\n              _a.sent();\n              _a.label = 5;\n            case 5:\n              this.updateState({\n                volume: volume\n              });\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.syncDevice = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var deviceId, token, player, track, error_7, state;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!this.isActive) {\n                return [2 /*return*/];\n              }\n\n              deviceId = this.state.deviceId;\n              token = this.props.token;\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1, 3,, 4]);\n              return [4 /*yield*/, spotify_1.getPlaybackState(token)];\n            case 2:\n              player = _a.sent();\n              track = this.emptyTrack;\n              if (!player) {\n                throw new Error('No player');\n              }\n              /* istanbul ignore else */\n              if (player.item) {\n                track = {\n                  artists: player.item.artists.map(function (d) {\n                    return d.name;\n                  }).join(', '),\n                  durationMs: player.item.duration_ms,\n                  id: player.item.id,\n                  image: this.setAlbumImage(player.item.album),\n                  name: player.item.name,\n                  uri: player.item.uri\n                };\n              }\n              this.updateState({\n                error: '',\n                errorType: '',\n                isActive: true,\n                isPlaying: player.is_playing,\n                nextTracks: [],\n                previousTracks: [],\n                progressMs: player.item ? player.progress_ms : 0,\n                status: utils_1.STATUS.READY,\n                track: track,\n                volume: player.device.volume_percent / 100\n              });\n              return [3 /*break*/, 4];\n            case 3:\n              error_7 = _a.sent();\n              state = {\n                isActive: false,\n                isPlaying: false,\n                position: 0,\n                track: this.emptyTrack\n              };\n              if (deviceId) {\n                this.updateState(__assign({\n                  currentDeviceId: deviceId\n                }, state));\n                return [2 /*return*/];\n              }\n\n              this.updateState(__assign({\n                error: error_7.message,\n                errorType: 'player_status',\n                status: utils_1.STATUS.ERROR\n              }, state));\n              return [3 /*break*/, 4];\n            case 4:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.toggleOffset = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, currentDeviceId, isPlaying, _b, offset, token, uris;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _a = this.state, currentDeviceId = _a.currentDeviceId, isPlaying = _a.isPlaying;\n              _b = this.props, offset = _b.offset, token = _b.token, uris = _b.uris;\n              if (!(isPlaying && typeof offset === 'number' && Array.isArray(uris))) return [3 /*break*/, 2];\n              return [4 /*yield*/, spotify_1.play(token, {\n                deviceId: currentDeviceId,\n                offset: offset,\n                uris: uris\n              })];\n            case 1:\n              _c.sent();\n              _c.label = 2;\n            case 2:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.togglePlay = function (init) {\n      if (init === void 0) {\n        init = false;\n      }\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, currentDeviceId, isPlaying, needsUpdate, _b, offset, token, uris, shouldInitialize, playOptions, playerState, error_8;\n        var _this = this;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _a = this.state, currentDeviceId = _a.currentDeviceId, isPlaying = _a.isPlaying, needsUpdate = _a.needsUpdate;\n              _b = this.props, offset = _b.offset, token = _b.token, uris = _b.uris;\n              shouldInitialize = init || needsUpdate;\n              playOptions = this.getPlayOptions(uris);\n              _c.label = 1;\n            case 1:\n              _c.trys.push([1, 12,, 13]);\n              if (!this.isExternalPlayer) return [3 /*break*/, 6];\n              if (!!isPlaying) return [3 /*break*/, 3];\n              return [4 /*yield*/, spotify_1.play(token, __assign({\n                deviceId: currentDeviceId,\n                offset: offset\n              }, shouldInitialize ? playOptions : undefined))];\n            case 2:\n              _c.sent();\n              return [3 /*break*/, 5];\n            case 3:\n              return [4 /*yield*/, spotify_1.pause(token)];\n            case 4:\n              _c.sent();\n              this.updateState({\n                isPlaying: false\n              });\n              _c.label = 5;\n            case 5:\n              this.syncTimeout = window.setTimeout(function () {\n                _this.syncDevice();\n              }, 300);\n              return [3 /*break*/, 11];\n            case 6:\n              if (!this.player) return [3 /*break*/, 11];\n              return [4 /*yield*/, this.player.getCurrentState()];\n            case 7:\n              playerState = _c.sent();\n              if (!(!playerState && !!(playOptions.context_uri || playOptions.uris) || shouldInitialize && playerState && playerState.paused)) return [3 /*break*/, 9];\n              return [4 /*yield*/, spotify_1.play(token, __assign({\n                deviceId: currentDeviceId,\n                offset: offset\n              }, shouldInitialize ? playOptions : undefined))];\n            case 8:\n              _c.sent();\n              return [3 /*break*/, 11];\n            case 9:\n              return [4 /*yield*/, this.player.togglePlay()];\n            case 10:\n              _c.sent();\n              _c.label = 11;\n            case 11:\n              if (needsUpdate) {\n                this.updateState({\n                  needsUpdate: false\n                });\n              }\n              return [3 /*break*/, 13];\n            case 12:\n              error_8 = _c.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_8);\n              return [3 /*break*/, 13];\n            case 13:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.updateSeekBar = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, progressMs, track, position, state, position, error_9;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              if (!this.isActive) {\n                return [2 /*return*/];\n              }\n\n              _a = this.state, progressMs = _a.progressMs, track = _a.track;\n              _b.label = 1;\n            case 1:\n              _b.trys.push([1, 5,, 6]);\n              if (!this.isExternalPlayer) return [3 /*break*/, 2];\n              position = progressMs / track.durationMs;\n              position = Number.isFinite(position) ? position : 0;\n              this.updateState({\n                position: Number((position * 100).toFixed(1)),\n                progressMs: progressMs + this.seekUpdateInterval\n              });\n              return [3 /*break*/, 4];\n            case 2:\n              if (!this.player) return [3 /*break*/, 4];\n              return [4 /*yield*/, this.player.getCurrentState()];\n            case 3:\n              state = _b.sent();\n              /* istanbul ignore else */\n              if (state) {\n                position = state.position / state.track_window.current_track.duration_ms;\n                this.updateState({\n                  position: Number((position * 100).toFixed(1))\n                });\n              }\n              _b.label = 4;\n            case 4:\n              return [3 /*break*/, 6];\n            case 5:\n              error_9 = _b.sent();\n              // eslint-disable-next-line no-console\n              console.error(error_9);\n              return [3 /*break*/, 6];\n            case 6:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    _this.updateState = function (state) {\n      if (state === void 0) {\n        state = {};\n      }\n      if (!_this.isActive) {\n        return;\n      }\n      _this.setState(state);\n    };\n    _this.state = {\n      currentDeviceId: '',\n      deviceId: '',\n      devices: [],\n      error: '',\n      errorType: '',\n      isActive: false,\n      isInitializing: false,\n      isMagnified: false,\n      isPlaying: false,\n      isSaved: false,\n      isUnsupported: false,\n      needsUpdate: false,\n      nextTracks: [],\n      position: 0,\n      previousTracks: [],\n      status: utils_1.STATUS.IDLE,\n      track: _this.emptyTrack,\n      volume: 1\n    };\n    _this.styles = styles_1.getMergedStyles(props.styles);\n    return _this;\n  }\n  SpotifyWebPlayer.prototype.componentDidMount = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.isActive = true;\n            this.updateState({\n              status: utils_1.STATUS.INITIALIZING\n            });\n            // @ts-ignore\n            window.onSpotifyWebPlaybackSDKReady = this.initializePlayer;\n            return [4 /*yield*/, utils_1.loadScript({\n              defer: true,\n              id: 'spotify-player',\n              source: 'https://sdk.scdn.co/spotify-player.js'\n            })];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  SpotifyWebPlayer.prototype.componentDidUpdate = function (prevProps, prevState) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, currentDeviceId, deviceId, error, isInitializing, isPlaying, status, track, _b, autoPlay, callback, offset, playProp, showSaveIcon, syncExternalDevice, token, uris, isReady, changedURIs, playOptions, canPlay, shouldPlay, player;\n      var _this = this;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            _a = this.state, currentDeviceId = _a.currentDeviceId, deviceId = _a.deviceId, error = _a.error, isInitializing = _a.isInitializing, isPlaying = _a.isPlaying, status = _a.status, track = _a.track;\n            _b = this.props, autoPlay = _b.autoPlay, callback = _b.callback, offset = _b.offset, playProp = _b.play, showSaveIcon = _b.showSaveIcon, syncExternalDevice = _b.syncExternalDevice, token = _b.token, uris = _b.uris;\n            isReady = prevState.status !== utils_1.STATUS.READY && status === utils_1.STATUS.READY;\n            changedURIs = Array.isArray(uris) ? !utils_1.isEqualArray(prevProps.uris, uris) : prevProps.uris !== uris;\n            playOptions = this.getPlayOptions(uris);\n            canPlay = !!currentDeviceId && !!(playOptions.context_uri || playOptions.uris);\n            shouldPlay = changedURIs && isPlaying || !!(isReady && (autoPlay || playProp));\n            if (!(canPlay && shouldPlay)) return [3 /*break*/, 2];\n            return [4 /*yield*/, spotify_1.play(token, __assign({\n              deviceId: currentDeviceId,\n              offset: offset\n            }, playOptions))];\n          case 1:\n            _c.sent();\n            /* istanbul ignore else */\n            if (!isPlaying) {\n              this.updateState({\n                isPlaying: true\n              });\n            }\n            if (this.isExternalPlayer) {\n              this.syncTimeout = window.setTimeout(function () {\n                _this.syncDevice();\n              }, 600);\n            }\n            return [3 /*break*/, 3];\n          case 2:\n            if (changedURIs && !isPlaying) {\n              this.updateState({\n                needsUpdate: true\n              });\n            }\n            _c.label = 3;\n          case 3:\n            if (prevState.status !== status) {\n              callback(__assign(__assign({}, this.state), {\n                type: utils_1.TYPE.STATUS\n              }));\n            }\n            if (!(prevState.currentDeviceId !== currentDeviceId && currentDeviceId)) return [3 /*break*/, 6];\n            if (!isReady) {\n              callback(__assign(__assign({}, this.state), {\n                type: utils_1.TYPE.DEVICE\n              }));\n            }\n            return [4 /*yield*/, this.toggleSyncInterval(this.isExternalPlayer)];\n          case 4:\n            _c.sent();\n            return [4 /*yield*/, this.updateSeekBar()];\n          case 5:\n            _c.sent();\n            _c.label = 6;\n          case 6:\n            if (prevState.track.id !== track.id && track.id) {\n              callback(__assign(__assign({}, this.state), {\n                type: utils_1.TYPE.TRACK\n              }));\n              if (showSaveIcon) {\n                this.updateState({\n                  isSaved: false\n                });\n              }\n            }\n            if (!(prevState.isPlaying !== isPlaying)) return [3 /*break*/, 8];\n            this.toggleProgressBar();\n            return [4 /*yield*/, this.toggleSyncInterval(this.isExternalPlayer)];\n          case 7:\n            _c.sent();\n            callback(__assign(__assign({}, this.state), {\n              type: utils_1.TYPE.PLAYER\n            }));\n            _c.label = 8;\n          case 8:\n            if (prevProps.token && prevProps.token !== token) {\n              this.hasNewToken = true;\n              if (!isInitializing) {\n                this.initializePlayer();\n              } else {\n                this.hasNewToken = true;\n              }\n            }\n            if (!(prevProps.play !== playProp && playProp !== isPlaying)) return [3 /*break*/, 10];\n            return [4 /*yield*/, this.togglePlay(true)];\n          case 9:\n            _c.sent();\n            _c.label = 10;\n          case 10:\n            if (!(prevProps.offset !== offset)) return [3 /*break*/, 12];\n            return [4 /*yield*/, this.toggleOffset()];\n          case 11:\n            _c.sent();\n            _c.label = 12;\n          case 12:\n            if (!(prevState.isInitializing && !isInitializing)) return [3 /*break*/, 14];\n            if (error === 'authentication_error' && this.hasNewToken) {\n              this.hasNewToken = false;\n              this.initializePlayer();\n            }\n            if (!(syncExternalDevice && !uris)) return [3 /*break*/, 14];\n            return [4 /*yield*/, spotify_1.getPlaybackState(token)];\n          case 13:\n            player = _c.sent();\n            if (player && player.is_playing && player.device.id !== deviceId) {\n              this.setExternalDevice(player.device.id);\n            }\n            _c.label = 14;\n          case 14:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  SpotifyWebPlayer.prototype.componentWillUnmount = function () {\n    this.isActive = false;\n    /* istanbul ignore else */\n    if (this.player) {\n      this.player.disconnect();\n    }\n    clearInterval(this.playerSyncInterval);\n    clearInterval(this.playerProgressInterval);\n    clearTimeout(this.syncTimeout);\n  };\n  Object.defineProperty(SpotifyWebPlayer.prototype, \"isExternalPlayer\", {\n    get: function () {\n      var _a = this.state,\n        currentDeviceId = _a.currentDeviceId,\n        deviceId = _a.deviceId,\n        status = _a.status;\n      return currentDeviceId && currentDeviceId !== deviceId || status === utils_1.STATUS.UNSUPPORTED;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  SpotifyWebPlayer.prototype.initializeDevices = function (id) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, persistDeviceSelection, token, devices, currentDeviceId, savedDeviceId_1;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = this.props, persistDeviceSelection = _a.persistDeviceSelection, token = _a.token;\n            return [4 /*yield*/, spotify_1.getDevices(token)];\n          case 1:\n            devices = _b.sent().devices;\n            currentDeviceId = id;\n            if (persistDeviceSelection) {\n              savedDeviceId_1 = sessionStorage.getItem('rswpDeviceId');\n              if (!savedDeviceId_1 || !devices.find(function (d) {\n                return d.id === savedDeviceId_1;\n              })) {\n                sessionStorage.setItem('rswpDeviceId', currentDeviceId);\n              } else {\n                currentDeviceId = savedDeviceId_1;\n              }\n            }\n            return [2 /*return*/, {\n              currentDeviceId: currentDeviceId,\n              devices: devices\n            }];\n        }\n      });\n    });\n  };\n  SpotifyWebPlayer.prototype.toggleSyncInterval = function (shouldSync) {\n    return __awaiter(this, void 0, void 0, function () {\n      var syncExternalDeviceInterval, error_10;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            syncExternalDeviceInterval = this.props.syncExternalDeviceInterval;\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 4,, 5]);\n            if (!(this.isExternalPlayer && shouldSync && !this.playerSyncInterval)) return [3 /*break*/, 3];\n            return [4 /*yield*/, this.syncDevice()];\n          case 2:\n            _a.sent();\n            clearInterval(this.playerSyncInterval);\n            this.playerSyncInterval = window.setInterval(this.syncDevice, syncExternalDeviceInterval * 1000);\n            _a.label = 3;\n          case 3:\n            if ((!shouldSync || !this.isExternalPlayer) && this.playerSyncInterval) {\n              clearInterval(this.playerSyncInterval);\n              this.playerSyncInterval = undefined;\n            }\n            return [3 /*break*/, 5];\n          case 4:\n            error_10 = _a.sent();\n            // eslint-disable-next-line no-console\n            console.error(error_10);\n            return [3 /*break*/, 5];\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  SpotifyWebPlayer.prototype.toggleProgressBar = function () {\n    var isPlaying = this.state.isPlaying;\n    if (isPlaying) {\n      /* istanbul ignore else */\n      if (!this.playerProgressInterval) {\n        this.playerProgressInterval = window.setInterval(this.updateSeekBar, this.seekUpdateInterval);\n      }\n    } else if (this.playerProgressInterval) {\n      clearInterval(this.playerProgressInterval);\n      this.playerProgressInterval = undefined;\n    }\n  };\n  SpotifyWebPlayer.prototype.render = function () {\n    var _a = this.state,\n      currentDeviceId = _a.currentDeviceId,\n      deviceId = _a.deviceId,\n      devices = _a.devices,\n      error = _a.error,\n      errorType = _a.errorType,\n      isActive = _a.isActive,\n      isMagnified = _a.isMagnified,\n      isUnsupported = _a.isUnsupported,\n      isPlaying = _a.isPlaying,\n      nextTracks = _a.nextTracks,\n      position = _a.position,\n      previousTracks = _a.previousTracks,\n      status = _a.status,\n      track = _a.track,\n      volume = _a.volume;\n    var _b = this.props,\n      name = _b.name,\n      showSaveIcon = _b.showSaveIcon,\n      token = _b.token,\n      updateSavedStatus = _b.updateSavedStatus;\n    var isReady = [utils_1.STATUS.READY, utils_1.STATUS.UNSUPPORTED].indexOf(status) >= 0;\n    var isPlaybackError = errorType === 'playback_error';\n    var output = React.createElement(Loader_1.default, {\n      styles: this.styles\n    });\n    var info;\n    if (isPlaybackError) {\n      info = React.createElement(\"p\", null, error);\n    }\n    if (isReady) {\n      /* istanbul ignore else */\n      if (!info) {\n        info = React.createElement(Info_1.default, {\n          handleFavoriteStatusChange: this.handleFavoriteStatusChange,\n          showSaveIcon: showSaveIcon,\n          isActive: isActive,\n          styles: this.styles,\n          token: token,\n          track: track,\n          updateSavedStatus: updateSavedStatus\n        });\n      }\n      output = React.createElement(React.Fragment, null, React.createElement(\"div\", null, info), React.createElement(Controls_1.default, {\n        isExternalDevice: this.isExternalPlayer,\n        isPlaying: isPlaying,\n        onClickNext: this.handleClickNext,\n        onClickPrevious: this.handleClickPrevious,\n        onClickTogglePlay: this.handleClickTogglePlay,\n        nextTracks: nextTracks,\n        previousTracks: previousTracks,\n        styles: this.styles\n      }), React.createElement(Actions_1.default, {\n        currentDeviceId: currentDeviceId,\n        devices: devices,\n        isDevicesOpen: isUnsupported && !deviceId,\n        onClickDevice: this.handleClickDevice,\n        setVolume: this.setVolume,\n        styles: this.styles,\n        volume: volume\n      }));\n    }\n    if (status === utils_1.STATUS.ERROR) {\n      output = React.createElement(ErrorMessage_1.default, {\n        styles: this.styles\n      }, name, \": \", error);\n    }\n    return React.createElement(Player_1.default, {\n      styles: this.styles\n    }, isReady && React.createElement(Slider_1.default, {\n      isMagnified: isMagnified,\n      onChangeRange: this.handleChangeRange,\n      onToggleMagnify: this.handleToggleMagnify,\n      position: position,\n      styles: this.styles\n    }), React.createElement(Content_1.default, {\n      styles: this.styles\n    }, output));\n  };\n  SpotifyWebPlayer.defaultProps = {\n    callback: function () {\n      return undefined;\n    },\n    magnifySliderOnHover: false,\n    name: 'Spotify Web Player',\n    showSaveIcon: false,\n    syncExternalDeviceInterval: 5,\n    syncExternalDevice: false\n  };\n  return SpotifyWebPlayer;\n}(React.PureComponent);\n__exportStar(require(\"./types\"), exports);\nexports.default = SpotifyWebPlayer;","map":{"version":3,"names":["React","require","memoize_one_1","spotify_1","styles_1","utils_1","Object","defineProperty","exports","enumerable","get","STATUS","TYPE","Actions_1","Content_1","Controls_1","ErrorMessage_1","Info_1","Loader_1","Player_1","Slider_1","SpotifyWebPlayer","_super","__extends","props","_this","call","isActive","emptyTrack","artists","durationMs","id","image","name","uri","getPlayOptions","default","data","playOptions","context_uri","undefined","uris","ids","Array","isArray","every","d","validateURI","console","error","some","getSpotifyURIType","warn","filter","length","hasNewToken","seekUpdateInterval","handleChangeRange","position","__awaiter","track","state","token","percentage","isExternalPlayer","seek","Math","round","_a","sent","updateState","progressMs","player","getCurrentState","track_window","current_track","duration_ms","error_1","handleClickTogglePlay","togglePlay","error_2","handleClickPrevious","previous","syncTimeout","window","setTimeout","syncDevice","previousTrack","error_3","handleClickNext","next","nextTrack","error_4","handleClickDevice","deviceId","isUnsupported","autoPlay","persistDeviceSelection","currentDeviceId","setDevice","_b","sessionStorage","setItem","getPlaybackState","is_playing","error_5","handleFavoriteStatusChange","isSaved","callback","__assign","type","TRACK","handlePlayerErrors","message","status","isPlaybackError","isInitializationError","nextStatus","devices","disconnect","UNSUPPORTED","getDevices","ERROR","errorType","isInitializing","handlePlayerStateChanges","isPlaying","paused","album","name_1","getVolume","volume","map","join","setAlbumImage","nextTracks","next_tracks","previousTracks","previous_tracks","error_6","handlePlayerStatus","device_id","initializeDevices","_c","READY","IDLE","handleToggleMagnify","magnifySliderOnHover","prevState","isMagnified","initializePlayer","Spotify","Player","getOAuthToken","cb","addListener","connect","width","min","apply","__spread","images","thumb","find","url","setExternalDevice","setVolume","Error","item","progress_ms","device","volume_percent","error_7","toggleOffset","offset","play","init","needsUpdate","shouldInitialize","pause","playerState","error_8","updateSeekBar","Number","isFinite","toFixed","error_9","setState","styles","getMergedStyles","prototype","componentDidMount","INITIALIZING","onSpotifyWebPlaybackSDKReady","loadScript","defer","source","componentDidUpdate","prevProps","playProp","showSaveIcon","syncExternalDevice","isReady","changedURIs","isEqualArray","canPlay","shouldPlay","DEVICE","toggleSyncInterval","toggleProgressBar","PLAYER","componentWillUnmount","clearInterval","playerSyncInterval","playerProgressInterval","clearTimeout","savedDeviceId_1","getItem","shouldSync","syncExternalDeviceInterval","setInterval","error_10","render","updateSavedStatus","indexOf","output","createElement","info","Fragment","isExternalDevice","onClickNext","onClickPrevious","onClickTogglePlay","isDevicesOpen","onClickDevice","onChangeRange","onToggleMagnify","defaultProps","PureComponent","__exportStar"],"sources":["../src/index.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script"}