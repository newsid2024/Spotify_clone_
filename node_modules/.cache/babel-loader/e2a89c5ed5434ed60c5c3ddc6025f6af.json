{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateURI = exports.loadScript = exports.isEqualArray = exports.getSpotifyURIType = exports.TYPE = exports.STATUS = exports.canUseDOM = void 0;\nvar exenv_1 = require(\"exenv\");\nexports.canUseDOM = function () {\n  return exenv_1.canUseDOM;\n};\nexports.STATUS = {\n  ERROR: 'ERROR',\n  IDLE: 'IDLE',\n  INITIALIZING: 'INITIALIZING',\n  READY: 'READY',\n  RUNNING: 'RUNNING',\n  UNSUPPORTED: 'UNSUPPORTED'\n};\nexports.TYPE = {\n  DEVICE: 'device_update',\n  PLAYER: 'player_update',\n  STATUS: 'status_update',\n  TRACK: 'track_update'\n};\nfunction getSpotifyURIType(uri) {\n  var _a = __read(uri.split(':'), 2),\n    _b = _a[1],\n    type = _b === void 0 ? '' : _b;\n  return type;\n}\nexports.getSpotifyURIType = getSpotifyURIType;\nfunction isEqualArray(A, B) {\n  if (!Array.isArray(A) || !Array.isArray(B) || A.length !== B.length) {\n    return false;\n  }\n  var result = true;\n  A.forEach(function (a) {\n    return B.forEach(function (b) {\n      result = a === b;\n    });\n  });\n  return result;\n}\nexports.isEqualArray = isEqualArray;\nfunction loadScript(attributes) {\n  if (!attributes || !attributes.source) {\n    throw new Error('Invalid attributes');\n  }\n  return new Promise(function (resolve, reject) {\n    var _a = __assign({\n        async: false,\n        defer: false\n      }, attributes),\n      async = _a.async,\n      defer = _a.defer,\n      id = _a.id,\n      source = _a.source;\n    var scriptTag = document.getElementById('spotify-player');\n    if (!scriptTag) {\n      var script = document.createElement('script');\n      script.id = id || '';\n      script.type = 'text/javascript';\n      script.async = async;\n      script.defer = defer;\n      script.src = source;\n      script.onload = function () {\n        return resolve(undefined);\n      };\n      script.onerror = function (error) {\n        return reject(new Error(\"createScript: \" + error.message));\n      };\n      document.head.appendChild(script);\n    } else {\n      resolve();\n    }\n  });\n}\nexports.loadScript = loadScript;\nfunction validateURI(input) {\n  var validTypes = ['album', 'artist', 'playlist', 'show', 'track'];\n  /* istanbul ignore else */\n  if (input && input.indexOf(':') > -1) {\n    var _a = __read(input.split(':'), 3),\n      key = _a[0],\n      type = _a[1],\n      id = _a[2];\n    /* istanbul ignore else */\n    if (key === 'spotify' && validTypes.indexOf(type) >= 0 && id.length === 22) {\n      return true;\n    }\n  }\n  return false;\n}\nexports.validateURI = validateURI;","map":{"version":3,"names":["exenv_1","require","exports","canUseDOM","STATUS","ERROR","IDLE","INITIALIZING","READY","RUNNING","UNSUPPORTED","TYPE","DEVICE","PLAYER","TRACK","getSpotifyURIType","uri","_a","__read","split","_b","type","isEqualArray","A","B","Array","isArray","length","result","forEach","a","b","loadScript","attributes","source","Error","Promise","resolve","reject","__assign","async","defer","id","scriptTag","document","getElementById","script","createElement","src","onload","undefined","onerror","error","message","head","appendChild","validateURI","input","validTypes","indexOf","key"],"sources":["../src/utils.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script"}