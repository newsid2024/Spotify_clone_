{"ast":null,"code":"import _slicedToArray from\"/Users/siddharthkeshar/Documents/GitHub/Spotify_clo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import'./App.css';import Login from'./components/Login';import{getAccessToken}from'./components/spotify';import SpotifyWebApi from'spotify-web-api-js';//npm i spotify-web-api-js \n//https://github.com/JMPerez/spotify-web-api-js\nimport Player from'./components/Player';import{useDataLayerValue}from'./DataLayer';var spotifyOb=new SpotifyWebApi();function App(){//deployed\n//const [token , setToken] = useState(null)\nvar _useDataLayerValue=useDataLayerValue(),_useDataLayerValue2=_slicedToArray(_useDataLayerValue,2),token=_useDataLayerValue2[0].token,dispatch=_useDataLayerValue2[1];//DataLayer.user is destructured in this\n//state in {} will get everything\nuseEffect(function(){var hash=getAccessToken();window.location.hash=\"\";var _token=hash.access_token;if(_token){dispatch({type:'SET_TOKEN',token:_token});spotifyOb.setAccessToken(_token);//spotify object from spotify WebApi Wrapper which helps us communicate with Spotify app\nspotifyOb.getMe().then(function(user){dispatch({type:'SET_USER',user:user});});spotifyOb.getUserPlaylists().then(function(playlists){dispatch({type:'SET_PLAYLISTS',playlists:playlists});});}spotifyOb.getMyTopArtists().then(function(response){return dispatch({type:\"SET_TOP_ARTISTS\",top_artists:response});});//enter your own discover weekly playlist id to get your songs\nspotifyOb.getPlaylist(\"37i9dQZEVXcJZyENOWUFo7\").then(function(response){dispatch({type:'SET_DISCOVER_WEEKLY',discover_weekly:response});});},[token,dispatch]);return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},token?/*#__PURE__*/React.createElement(Player,{spotify:spotifyOb}):/*#__PURE__*/React.createElement(Login,null));}export default App;//useEffect Hook \n/**\n * It runs a piece of code based on a given condition\n * It runs a function given inside it\n * //we give [] to specify it to run it only once\n * //if we put a variable inside [name,age] the useEffect will run whenever the name var changes.\n */ //Problem: Prop Drilling\n//Solution:Context API","map":{"version":3,"names":["React","useEffect","Login","getAccessToken","SpotifyWebApi","Player","useDataLayerValue","spotifyOb","App","_useDataLayerValue","_useDataLayerValue2","_slicedToArray","token","dispatch","hash","window","location","_token","access_token","type","setAccessToken","getMe","then","user","getUserPlaylists","playlists","getMyTopArtists","response","top_artists","getPlaylist","discover_weekly","createElement","className","spotify"],"sources":["/Users/siddharthkeshar/Documents/GitHub/Spotify_clo/src/App.js"],"sourcesContent":["import React,{ useEffect } from 'react'\nimport './App.css'\nimport Login from './components/Login'\nimport { getAccessToken } from './components/spotify'\nimport SpotifyWebApi from 'spotify-web-api-js'\n//npm i spotify-web-api-js \n//https://github.com/JMPerez/spotify-web-api-js\nimport Player from './components/Player'\nimport {useDataLayerValue} from './DataLayer'\n\n\nconst spotifyOb = new SpotifyWebApi()\n\nfunction App() {\n  //deployed\n    //const [token , setToken] = useState(null)\n    const [{token},dispatch] = useDataLayerValue()\n            //DataLayer.user is destructured in this\n            //state in {} will get everything\n    useEffect(() => {\n      const hash = getAccessToken();\n      window.location.hash=\"\"\n      const _token = hash.access_token\n\n      if (_token){\n\n        dispatch(\n          {\n            type: 'SET_TOKEN',\n            token: _token,\n          }\n        )\n        spotifyOb.setAccessToken(_token) //spotify object from spotify WebApi Wrapper which helps us communicate with Spotify app\n\n        spotifyOb.getMe().then(user => {\n          dispatch(\n            {\n              type: 'SET_USER',\n              user:user,\n            }\n          )\n        })\n        spotifyOb.getUserPlaylists().then((playlists) => {\n          dispatch(\n            {\n              type: 'SET_PLAYLISTS',\n              playlists:playlists,\n            }\n          )\n        })\n      }\n      spotifyOb.getMyTopArtists().then((response) =>\n        dispatch({\n          type: \"SET_TOP_ARTISTS\",\n          top_artists: response,\n        })\n      );\n\n      //enter your own discover weekly playlist id to get your songs\n      spotifyOb.getPlaylist(\"37i9dQZEVXcJZyENOWUFo7\").then((response)=>{\n        dispatch(\n          {\n            type: 'SET_DISCOVER_WEEKLY',\n            discover_weekly:response,\n          }\n        )\n      })\n      \n    },[token,dispatch])\n  return (\n      \n    <div className=\"App\">\n      { token ?  <Player spotify={spotifyOb}/> :  <Login/>}\n    </div>\n  )\n\n}\n\nexport default App;\n\n\n//useEffect Hook \n/**\n * It runs a piece of code based on a given condition\n * It runs a function given inside it\n * //we give [] to specify it to run it only once\n * //if we put a variable inside [name,age] the useEffect will run whenever the name var changes.\n */\n\n //Problem: Prop Drilling\n //Solution:Context API"],"mappings":"0KAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,KAAQ,OAAO,CACvC,MAAO,WAAW,CAClB,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,OAASC,cAAc,KAAQ,sBAAsB,CACrD,MAAO,CAAAC,aAAa,KAAM,oBAAoB,CAC9C;AACA;AACA,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,OAAQC,iBAAiB,KAAO,aAAa,CAG7C,GAAM,CAAAC,SAAS,CAAG,GAAI,CAAAH,aAAa,CAAC,CAAC,CAErC,QAAS,CAAAI,GAAGA,CAAA,CAAG,CACb;AACE;AACA,IAAAC,kBAAA,CAA2BH,iBAAiB,CAAC,CAAC,CAAAI,mBAAA,CAAAC,cAAA,CAAAF,kBAAA,IAAtCG,KAAK,CAAAF,mBAAA,IAALE,KAAK,CAAEC,QAAQ,CAAAH,mBAAA,IACf;AACA;AACRT,SAAS,CAAC,UAAM,CACd,GAAM,CAAAa,IAAI,CAAGX,cAAc,CAAC,CAAC,CAC7BY,MAAM,CAACC,QAAQ,CAACF,IAAI,CAAC,EAAE,CACvB,GAAM,CAAAG,MAAM,CAAGH,IAAI,CAACI,YAAY,CAEhC,GAAID,MAAM,CAAC,CAETJ,QAAQ,CACN,CACEM,IAAI,CAAE,WAAW,CACjBP,KAAK,CAAEK,MACT,CACF,CAAC,CACDV,SAAS,CAACa,cAAc,CAACH,MAAM,CAAC,CAAC;AAEjCV,SAAS,CAACc,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,IAAI,CAAI,CAC7BV,QAAQ,CACN,CACEM,IAAI,CAAE,UAAU,CAChBI,IAAI,CAACA,IACP,CACF,CAAC,CACH,CAAC,CAAC,CACFhB,SAAS,CAACiB,gBAAgB,CAAC,CAAC,CAACF,IAAI,CAAC,SAACG,SAAS,CAAK,CAC/CZ,QAAQ,CACN,CACEM,IAAI,CAAE,eAAe,CACrBM,SAAS,CAACA,SACZ,CACF,CAAC,CACH,CAAC,CAAC,CACJ,CACAlB,SAAS,CAACmB,eAAe,CAAC,CAAC,CAACJ,IAAI,CAAC,SAACK,QAAQ,QACxC,CAAAd,QAAQ,CAAC,CACPM,IAAI,CAAE,iBAAiB,CACvBS,WAAW,CAAED,QACf,CAAC,CAAC,EACJ,CAAC,CAED;AACApB,SAAS,CAACsB,WAAW,CAAC,wBAAwB,CAAC,CAACP,IAAI,CAAC,SAACK,QAAQ,CAAG,CAC/Dd,QAAQ,CACN,CACEM,IAAI,CAAE,qBAAqB,CAC3BW,eAAe,CAACH,QAClB,CACF,CAAC,CACH,CAAC,CAAC,CAEJ,CAAC,CAAC,CAACf,KAAK,CAACC,QAAQ,CAAC,CAAC,CACrB,mBAEEb,KAAA,CAAA+B,aAAA,QAAKC,SAAS,CAAC,KAAK,EAChBpB,KAAK,cAAIZ,KAAA,CAAA+B,aAAA,CAAC1B,MAAM,EAAC4B,OAAO,CAAE1B,SAAU,CAAC,CAAC,cAAIP,KAAA,CAAA+B,aAAA,CAAC7B,KAAK,KAAC,CAChD,CAAC,CAGV,CAEA,cAAe,CAAAM,GAAG,CAGlB;AACA;AACA;AACA;AACA;AACA;AACA,GALA,CAOC;AACA"},"metadata":{},"sourceType":"module"}